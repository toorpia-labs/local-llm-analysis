# Configuration for macOS Apple Silicon (M1/M2/M3) with MPS
# Copy this to config.yaml for Apple Silicon Macs

experiment:
  name: "color_generation_mcp"
  description: "Analyze hidden states during MCP tool calling for color generation"
  version: "0.1.0"

model:
  backend: "transformers"
  model_name: "microsoft/DialoGPT-medium"  # Starting point - experiment with others
  device: "mps"  # Use Metal Performance Shaders for Apple Silicon
  torch_dtype: "float32"  # Required for MPS - float16 not fully supported
  load_in_8bit: false  # Not supported on MPS
  trust_remote_code: false

generation:
  max_new_tokens: 50
  do_sample: true
  temperature: 0.7
  top_p: 0.9

analysis:
  extract_hidden_states: true
  target_layers: [-1, -2, -3]  # Last 3 layers
  extract_for_tokens: "output_only"  # Focus on generated tokens
  save_raw_states: false  # Set true for detailed analysis, false for storage efficiency

mcp:
  tools_directory: "src/tools"
  timeout: 30

tasks:
  colors:
    - "red"
    - "blue"
    - "green"
    - "yellow"
    - "purple"
    - "orange"
    - "white"
    - "black"

  prompt_templates:
    - "Generate {color} color using the RGB tool."
    - "Please create {color} color."
    - "Show me {color} using RGB values."

  repetitions: 5  # Start small for initial testing

output:
  results_dir: "results"
  save_intermediate: true
  log_level: "INFO"